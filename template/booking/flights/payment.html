{% include 'booking/sections/header.html' %}
{% load static %}
<title>{{page_title}}</title>
<style>
    @import url('https://fonts.googleapis.com/css2?family=Manrope:wght@400;500;600;700&display=swap');
</style>
<script src="https://checkout.razorpay.com/v1/checkout.js"></script>
</head>

<body>
    {% include 'booking/sections/nav-bar.html' %}

    {% if messages %}
    <div class="alerts-list absolute right-0 mr-4">
        {% for message in messages %}
        <div onclick="this.style.display='none';"
            class="p-2 bg-blue-200 text-blue-800 cursor-pointer p-4 text-sm rounded border border-blue-300 my-3">
            {{message}}
        </div>
        {% endfor %}
    </div>
    {% endif %}


    <div class="mx-8 my-8 lg:mx-32 sm:mx-8 lg:my-10 sm:my-8">
        <div>
            <div class="overflow-hidden rounded-full bg-gray-200">
                <div class="h-2 w-full rounded-full bg-red-400"></div>
            </div>

            <ol class="mt-4 grid grid-cols-3 text-sm font-medium text-gray-500">
                <li class="cursor-pointer  flex items-center justify-start text-gray-600">
                    <span class="hidden sm:inline"> Flight </span>


                    <svg viewBox="0 0 64 64" data-testid="tripDetails-bound-plane-icon" pointer-events="all"
                        class="h-6 w-6 sm:ml-2 sm:h-5 sm:w-5" aria-hidden="true" stroke-width="2" role="presentation"
                        style="stroke: #6b72809a ; fill: #6b72809a;">
                        <path
                            d="M43.389 38.269L29.222 61.34a1.152 1.152 0 01-1.064.615H20.99a1.219 1.219 0 01-1.007-.5 1.324 1.324 0 01-.2-1.149L26.2 38.27H11.7l-3.947 6.919a1.209 1.209 0 01-1.092.644H1.285a1.234 1.234 0 01-.895-.392l-.057-.056a1.427 1.427 0 01-.308-1.036L1.789 32 .025 19.656a1.182 1.182 0 01.281-1.009 1.356 1.356 0 01.951-.448l5.4-.027a1.227 1.227 0 01.9.391.85.85 0 01.2.252L11.7 25.73h14.5L19.792 3.7a1.324 1.324 0 01.2-1.149A1.219 1.219 0 0121 2.045h7.168a1.152 1.152 0 011.064.615l14.162 23.071h8.959a17.287 17.287 0 017.839 1.791Q63.777 29.315 64 32q-.224 2.685-3.807 4.478a17.282 17.282 0 01-7.84 1.793h-9.016z">
                        </path>
                    </svg>
                </li>

                <li class="cursor-pointer flex items-center justify-center ">
                    <span class="hidden sm:inline"> Information </span>

                    <svg class="h-6 w-6 sm:ml-2 sm:h-5 sm:w-5" xmlns="http://www.w3.org/2000/svg" fill="none"
                        viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round"
                            d="M10 6H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V8a2 2 0 00-2-2h-5m-4 0V5a2 2 0 114 0v1m-4 0a2 2 0 104 0m-5 8a2 2 0 100-4 2 2 0 000 4zm0 0c1.306 0 2.417.835 2.83 2M9 14a3.001 3.001 0 00-2.83 2M15 11h3m-3 4h2" />
                    </svg>
                </li>

                <li class="cursor-pointer flex items-center justify-end text-red-600">
                    <span class="hidden sm:inline"> Payment </span>

                    <svg class=" h-6 w-6 sm:ml-2 sm:h-5 sm:w-5" xmlns="http://www.w3.org/2000/svg" fill="none"
                        viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round"
                            d="M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z" />
                    </svg>
                </li>
            </ol>
        </div>
    </div>


    <div class="min-h-screen bg-gray-300">
        <div class="container mx-auto p-10 max-w-screen-lg">
            <div class="bg-white rounded shadow p-8">
                <!--  ToastBar  -->
                <div class="w-full bg-green-200 text-green-900 px-4 py-2 flex items-center">

                    <div class="text-sm">Review and <b>Pay</b> to book this flight </div>
                </div>
                <!-- Order Summary  -->
                <div>
                    <h3 class="text-xl mt-4 font-bold">Booking Summary</h3>
                    <!--     BOX     -->
                    <div class="border w-full rounded mt-5 flex p-4 justify-between items-center text-center flex-wrap">
                        <div class="w-1/3">
                            <h3 class="text-3xl font-medium">{{flight.origin_airport.iata_code}}</h3>
                            <h4 class="text-gray-700 text-xs font-bold mt-1">{{flight.departure_date}} {{flight.departure_time}} </h4>
                        </div>
                        <div class="w-1/3">
                            <h5 class="text-xl font-medium">{{booking.seat_type}}</h5>
                            <h4 class="text-gray-700 text-xs font-bold mt-1">{{flight}} </h4>
                        </div>
                        <div class="w-1/3">
                            <h3 class="text-3xl font-medium">{{flight.destination_airport.iata_code}}</h3>
                            <h4 class="text-gray-700 text-xs font-bold mt-1">{{flight.arrival_date}} {{flight.arrival_time}} </h4>
                        </div>
         
                    </div>
                    

                </div>

                <div class='card p-2 pl-0'>
                    <details class='transition duration-500 bg-red-200	cursor-pointer p-2 border-solid border-l-8 border-red-400 rounded-md hover:bg-red-400'>
                        <summary class='flex items-center justify-space-between focus:outline-none'>
                            <header class='flex justify-center items-center'>
                                <svg class='w-8 h-8' viewBox="0 0 44 44" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M32.6066 22H11.3934" stroke="#202842" stroke-width="1.875" stroke-linecap="round" stroke-linejoin="round" />
                                    <path d="M22 11.3934V32.6066" stroke="#202842" stroke-width="1.875" stroke-linecap="round" stroke-linejoin="round" />
                                </svg>
                                <h1 class='leading-5 flex self-center text-black text-xl'>Flight information</h1>
                            </header>
                        </summary>
                        <div class='content ml-4 text-lg'>
                            <table class="bg-black items-center w-full">
                                <thead>
                                    <th></th>
                                </thead>
                                <tbody class="bg-black">
                                    <tr class="bg-black text-gray-700 dark:text-gray-100">
                                        <th
                                            class="border-t-0 px-4 align-middle border-l-0 border-r-0 text-xs whitespace-nowrap p-4 text-left">
                                            Flight Number</th>
                            
                                        <td
                                            class="border-t-0 px-4 align-middle border-l-0 border-r-0 text-xs whitespace-nowrap p-4">
                                            {{flight.flight_number}}</td>
                                    </tr>

                                    <tr class="text-gray-700 dark:text-gray-100">
                                        <th
                                            class="border-t-0 px-4 align-middle border-l-0 border-r-0 text-xs whitespace-nowrap p-4 text-left">
                                            Departure Airport</th>
                            
                                        <td
                                            class="border-t-0 px-4 align-middle border-l-0 border-r-0 text-xs whitespace-nowrap p-4">
                                            {{flight.origin_airport.iata_code}}, {{flight.origin_airport.airport_city}}
                                        </td>
                                    </tr>

                                    <tr class="text-gray-700 dark:text-gray-100">
                                        <th
                                            class="border-t-0 px-4 align-middle border-l-0 border-r-0 text-xs whitespace-nowrap p-4 text-left">
                                            Departure Date Time
                                        </th>
                            
                                        <td
                                            class="border-t-0 px-4 align-middle border-l-0 border-r-0 text-xs whitespace-nowrap p-4">
                                            {{flight.departure_date}} {{flight.departure_time}}
                                        </td>
                                    </tr>

                                    <tr class="text-gray-700 dark:text-gray-100">
                                        <th
                                            class="border-t-0 px-4 align-middle border-l-0 border-r-0 text-xs whitespace-nowrap p-4 text-left">
                                            Arrival Airport
                                        </th>
                            
                                        <td
                                            class="border-t-0 px-4 align-middle border-l-0 border-r-0 text-xs whitespace-nowrap p-4">
                                            {{flight.destination_airport.iata_code}}, {{flight.destination_airport.airport_city}}
                                        </td>
                                    </tr>

                                    <tr class="text-gray-700 dark:text-gray-100">
                                        <th
                                            class="border-t-0 px-4 align-middle border-l-0 border-r-0 text-xs whitespace-nowrap p-4 text-left">
                                            Arrival Date Time
                                        </th>
                            
                                        <td
                                            class="border-t-0 px-4 align-middle border-l-0 border-r-0 text-xs whitespace-nowrap p-4">
                                            {{flight.arrival_date}} {{flight.arrival_time}}
                                        </td>
                                    </tr>

                       

                                    <tr class="text-gray-700 dark:text-gray-100">
                                        <th
                                            class="border-t-0 px-4 align-middle border-l-0 border-r-0 text-xs whitespace-nowrap p-4 text-left">
                                            Nationality</th>
                            
                                        <td
                                            class="border-t-0 px-4 align-middle border-l-0 border-r-0 text-xs whitespace-nowrap p-4">
                                            {{booking.citizenship}}</td>
                                    </tr>

                                    <tr class="text-gray-700 dark:text-gray-100">
                                        <th
                                            class="border-t-0 px-4 align-middle border-l-0 border-r-0 text-xs whitespace-nowrap p-4 text-left">
                                            Email</th>
                            
                                        <td
                                            class="border-t-0 px-4 align-middle border-l-0 border-r-0 text-xs whitespace-nowrap p-4">
                                            {{booking.email}}</td>
                                    </tr>

                                    <tr class="text-gray-700 dark:text-gray-100">
                                        <th
                                            class="border-t-0 px-4 align-middle border-l-0 border-r-0 text-xs whitespace-nowrap p-4 text-left">
                                            Phone No</th>
                            
                                        <td
                                            class="border-t-0 px-4 align-middle border-l-0 border-r-0 text-xs whitespace-nowrap p-4">
                                            {{booking.mobile_number}}</td>
                                    </tr>

                                    
                                </tbody>
                            </table>
                        </div>
                    </details>
                </div>

                <div class='card p-2  pl-0'>
                    <details class='transition duration-500 bg-red-200	cursor-pointer p-2 border-solid border-l-8 border-red-400 rounded-md hover:bg-red-400'>
                        <summary class='flex items-center justify-space-between focus:outline-none'>
                            <header class='flex justify-center items-center'>
                                <svg class='w-8 h-8' viewBox="0 0 44 44" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M32.6066 22H11.3934" stroke="#202842" stroke-width="1.875" stroke-linecap="round" stroke-linejoin="round" />
                                    <path d="M22 11.3934V32.6066" stroke="#202842" stroke-width="1.875" stroke-linecap="round" stroke-linejoin="round" />
                                </svg>
                                <h1 class='leading-5 flex self-center text-black text-xl'>Booking information</h1>
                            </header>
                        </summary>
                        <div class='content ml-4 text-lg'>
                            <table class="bg-black items-center w-full">
                                <thead>
                                    <th class="text-white">Passenger details</th>
                                </thead>
                                <tbody class="bg-black">
                                    <tr class="bg-black text-gray-700 dark:text-gray-100">
                                        <th
                                            class="border-t-0 px-4 align-middle border-l-0 border-r-0 text-xs whitespace-nowrap p-4 text-left">
                                            Passenger Name</th>
                            
                                        <td
                                            class="border-t-0 px-4 align-middle border-l-0 border-r-0 text-xs whitespace-nowrap p-4">
                                            {{booking.person_name}}</td>
                                    </tr>

                                    <tr class="text-gray-700 dark:text-gray-100">
                                        <th
                                            class="border-t-0 px-4 align-middle border-l-0 border-r-0 text-xs whitespace-nowrap p-4 text-left">
                                            Passport Gender</th>
                            
                                        <td
                                            class="border-t-0 px-4 align-middle border-l-0 border-r-0 text-xs whitespace-nowrap p-4">
                                            {{booking.gender}}</td>
                                    </tr>

                                    <tr class="text-gray-700 dark:text-gray-100">
                                        <th
                                            class="border-t-0 px-4 align-middle border-l-0 border-r-0 text-xs whitespace-nowrap p-4 text-left">
                                            Passport No</th>
                            
                                        <td
                                            class="border-t-0 px-4 align-middle border-l-0 border-r-0 text-xs whitespace-nowrap p-4">
                                            {{booking.passport_number}}</td>
                                    </tr>

                                    <tr class="text-gray-700 dark:text-gray-100">
                                        <th
                                            class="border-t-0 px-4 align-middle border-l-0 border-r-0 text-xs whitespace-nowrap p-4 text-left">
                                            Nationality</th>
                            
                                        <td
                                            class="border-t-0 px-4 align-middle border-l-0 border-r-0 text-xs whitespace-nowrap p-4">
                                            {{booking.citizenship}}</td>
                                    </tr>

                                    <tr class="text-gray-700 dark:text-gray-100">
                                        <th
                                            class="border-t-0 px-4 align-middle border-l-0 border-r-0 text-xs whitespace-nowrap p-4 text-left">
                                            Email</th>
                            
                                        <td
                                            class="border-t-0 px-4 align-middle border-l-0 border-r-0 text-xs whitespace-nowrap p-4">
                                            {{booking.email}}</td>
                                    </tr>

                                    <tr class="text-gray-700 dark:text-gray-100">
                                        <th
                                            class="border-t-0 px-4 align-middle border-l-0 border-r-0 text-xs whitespace-nowrap p-4 text-left">
                                            Phone No</th>
                            
                                        <td
                                            class="border-t-0 px-4 align-middle border-l-0 border-r-0 text-xs whitespace-nowrap p-4">
                                            {{booking.mobile_number}}</td>
                                    </tr>

                                    
                                </tbody>
                            </table>
                        </div>
                    </details>
                </div>


                <button id="flight-payment-button"
                    class="px-4 py-4 bg-red-600 text-white w-full mt-3 rounded shadow font-bold hover:bg-red-700">
                    Pay {{booking.fare_amount}}</button>
            </div>
            
        </div>
    </div>

    <script>
        const options = {
            key: "{{ razorpay_merchant_key }}",
            amount: "{{ razorpay_amount }}",
            currency: "{{ currency }}",
            name: "Luua",
            order_id: "{{ razorpay_order_id }}",
            callback_url: "{{ callback_url }}",
        };
        var rzp1 = new Razorpay(options);
        document.getElementById("flight-payment-button").onclick = function (e) {
            rzp1.open();
            e.preventDefault();
        };
    </script>



    {% include 'booking/sections/footer.html' %}